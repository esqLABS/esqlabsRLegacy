<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="esqlabsRLegacy">
<title>Creating figures • esqlabsRLegacy</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating figures">
<meta property="og:description" content="esqlabsRLegacy">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">esqlabsRLegacy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data-handling.html">Data handling</a>
    <a class="dropdown-item" href="../articles/figure-creation.html">Creating figures</a>
    <a class="dropdown-item" href="../articles/introduction-esqlabsr.html">Introduction to esqlabsRLegacy</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/esqLABS/esqlabsRLegacy/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Creating figures</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/esqLABS/esqlabsRLegacy/blob/HEAD/vignettes/figure-creation.Rmd" class="external-link"><code>vignettes/figure-creation.Rmd</code></a></small>
      <div class="d-none name"><code>figure-creation.Rmd</code></div>
    </div>

    
    
<p>This package offers a workflow for creating standardized figures for
time-values data, such as time-concentration profiles, goodness-of-fit
plots, etc. The integral part of these workflows are the objects of the
class <code>DataMapping</code>. A <code>DataMapping</code> organizes the
objects of the class <code>XYData</code> (see <a href="data-handling.html">Data handling</a> for more information) into
groups and maps simulation results to observed data.</p>
<div class="section level2">
<h2 id="datamapping-overview">
<code>DataMapping</code> overview<a class="anchor" aria-label="anchor" href="#datamapping-overview"></a>
</h2>
<p>The first step in organizing the data in a <code>DataMapping</code>
object and creating figures is the creation of an empty
<code>DataMapping</code> object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataMapping.html">DataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">dataMapping</span><span class="op">)</span>
<span class="co">#&gt; DataMapping: </span>
<span class="co">#&gt;    Plot type: IndividualProfile </span>
<span class="co">#&gt;    Population quantiles: 0.05 0.5 0.95 </span>
<span class="co">#&gt;    labels: </span>
<span class="co">#&gt;    X limits: 0 0 </span>
<span class="co">#&gt;    Y limits: 0 0 </span>
<span class="co">#&gt;    X label: </span>
<span class="co">#&gt;    Y label: </span>
<span class="co">#&gt;    X unit: </span>
<span class="co">#&gt;    Y unit: </span>
<span class="co">#&gt;    Title:  </span>
<span class="co">#&gt;    Log axes:</span></code></pre></div>
<p>In the next step, the mapping is populated with xy-values series that
can be organized into groups.</p>
<div class="section level3">
<h3 id="plotting-observed-data">Plotting observed data<a class="anchor" aria-label="anchor" href="#plotting-observed-data"></a>
</h3>
<p>Create a data configuration that describes where to find data and
which sheets to load and load the data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataConfiguration</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataConfiguration.html">DataConfiguration</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  dataFolder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">".."</span>, <span class="st">"tests"</span>, <span class="st">"data"</span><span class="op">)</span>,
  dataFile <span class="op">=</span> <span class="st">"CompiledDataSet.xlsx"</span>,
  compoundPropertiesFile <span class="op">=</span> <span class="st">"Compound_Properties.xlsx"</span>,
  dataSheets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Stevens_2012_placebo"</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">observedData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readOSPSTimeValues.html">readOSPSTimeValues</a></span><span class="op">(</span><span class="va">dataConfiguration</span><span class="op">)</span></code></pre></div>
<p>Add loaded data to <code>DataMapping</code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMapping</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataMapping.html">DataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">addXYData</span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="va">observedData</span><span class="op">$</span><span class="va">Stevens_2012_placebo</span><span class="op">$</span><span class="va">Placebo_distal</span>,
    <span class="va">observedData</span><span class="op">$</span><span class="va">Stevens_2012_placebo</span><span class="op">$</span><span class="va">Placebo_proximal</span>,
    <span class="va">observedData</span><span class="op">$</span><span class="va">Stevens_2012_placebo</span><span class="op">$</span><span class="va">Placebo_total</span>
  <span class="op">)</span>,
  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Stevens 2012 solid distal"</span>,
    <span class="st">"Stevens 2012 solid proximal"</span>,
    <span class="st">"Stevens 2012 solid total"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/addObsDataToMapping-1.png" width="768"></p>
<p>!!! It is not possible to change the labels of data in the legend
after the data have been added to the mapping because the data are
references in the mapping by their label. Changing the label of a
<code>XYData</code>-object will lead to the problem that it will not be
found by <code>DataMapping</code> any more. If required, a method of
<code>DataMapping</code> must be implemented
<code>setLabel(oldLabel, newLabel)</code>. It will change the label of
the <code>XYData</code>-object but also the corresponding name in the
list of <code>DataMapping</code>. Check should be performed that a new
label is not used already. Not feasable to implement before switching to
TLF.</p>
<p>It is possible to change the axis labels and figure title.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMapping</span><span class="op">$</span><span class="va">xLab</span> <span class="op">&lt;-</span> <span class="st">"Time [min]"</span>
<span class="va">dataMapping</span><span class="op">$</span><span class="va">yLab</span> <span class="op">&lt;-</span> <span class="st">"Gastric retention [%]"</span>
<span class="va">dataMapping</span><span class="op">$</span><span class="va">title</span> <span class="op">&lt;-</span> <span class="st">"Stevens 2012"</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/changeAxisAndTitle-1.png" width="768"></p>
<p>Add simulation results to the mapping. For this example, the results
have been saved as csv and are loaded. Simulation results are assigned
to the respective groups and therefore have same colors as observed data
of the same group.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu">loadSimulation</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">".."</span>, <span class="st">"tests"</span>, <span class="st">"data"</span>, <span class="st">"Stevens_2012_placebo_indiv_results.pkml"</span><span class="op">)</span><span class="op">)</span>
<span class="va">simResults</span> <span class="op">&lt;-</span> <span class="fu">importResultsFromCSV</span><span class="op">(</span>simulation <span class="op">=</span> <span class="va">sim</span>, filePaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">".."</span>, <span class="st">"tests"</span>, <span class="st">"data"</span>, <span class="st">"Stevens_2012_placebo_indiv_results.csv"</span><span class="op">)</span><span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">addModelOutputs</span><span class="op">(</span>
  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention"</span>,
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention distal"</span>,
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention proximal"</span>
  <span class="op">)</span>,
  simulationResults <span class="op">=</span> <span class="va">simResults</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Stevens_2012_placebo solid total sim"</span>,
    <span class="st">"Stevens_2012_placebo solid distal sim"</span>,
    <span class="st">"Stevens_2012_placebo solid proximal sim"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/addSimResultsToMapping-1.png" width="768"></p>
<p>Add simulation results to the mapping, assigning to the correct
groups. Simulation results are now have same colors as observed data of
the same group. As the labels of the assigned data sets are equal as the
ones assigned in the previous steps, the previous sets are
overwritten.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMapping</span><span class="op">$</span><span class="fu">addModelOutputs</span><span class="op">(</span>
  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention"</span>,
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention distal"</span>,
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention proximal"</span>
  <span class="op">)</span>,
  simulationResults <span class="op">=</span> <span class="va">simResults</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Stevens_2012_placebo solid total sim"</span>,
    <span class="st">"Stevens_2012_placebo solid distal sim"</span>,
    <span class="st">"Stevens_2012_placebo solid proximal sim"</span>
  <span class="op">)</span>,
  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Stevens 2012 solid total"</span>,
    <span class="st">"Stevens 2012 solid distal"</span>,
    <span class="st">"Stevens 2012 solid proximal"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/addSimResultsToMappingAndGrouping-1.png" width="768"></p>
<p>It is possible to change the units of the axis. Mind that axis labels
are not automatically adjusted. It could be implemented that the default
label (if not set by user) is always <code>Dimension [unit]</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMapping</span><span class="op">$</span><span class="va">xUnit</span> <span class="op">&lt;-</span> <span class="st">"h"</span>
<span class="va">dataMapping</span><span class="op">$</span><span class="va">yUnit</span> <span class="op">&lt;-</span> <span class="st">"%"</span>
<span class="va">dataMapping</span><span class="op">$</span><span class="va">xLab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">dataMapping</span><span class="op">$</span><span class="va">xDimension</span>, <span class="st">"["</span>, <span class="va">dataMapping</span><span class="op">$</span><span class="va">xUnit</span>, <span class="st">"]"</span><span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/changeAxisUnits-1.png" width="768"></p>
<p>Create a clone of the data mapping and change its plot type to
“predicted vs observed”.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMappingPvO</span> <span class="op">&lt;-</span> <span class="va">dataMapping</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">dataMappingPvO</span><span class="op">$</span><span class="va">log</span> <span class="op">&lt;-</span> <span class="st">""</span>
<span class="va">dataMappingPvO</span><span class="op">$</span><span class="va">plotType</span> <span class="op">&lt;-</span> <span class="va">PlotTypes</span><span class="op">$</span><span class="va">PredictedVsObserved</span>
<span class="va">dataMappingPvO</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/predVsObserved-1.png" width="768">
Add additional fold range and plot in logarithmic scale</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMappingPvO</span><span class="op">$</span><span class="va">log</span> <span class="op">&lt;-</span> <span class="st">"y"</span>
<span class="va">dataMappingPvO</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span>foldDistance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/predVsObservedLogY-1.png" width="768"></p>
<p>Create a clone of the data mapping and change its plot type to
“BoxPlot”.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMappingBoxPlot</span> <span class="op">&lt;-</span> <span class="va">dataMapping</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">dataMappingBoxPlot</span><span class="op">$</span><span class="va">plotType</span> <span class="op">&lt;-</span> <span class="va">PlotTypes</span><span class="op">$</span><span class="va">BoxPlot</span>
<span class="va">dataMappingBoxPlot</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/boxPlot-1.png" width="768"></p>
<p>Axis limits can be manually set</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMapping</span><span class="op">$</span><span class="va">xLim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">6</span><span class="op">)</span>
<span class="va">dataMapping</span><span class="op">$</span><span class="va">yLim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>, <span class="fl">150</span><span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/changeAxisLimits-1.png" width="768"></p>
<p>Setting factors and offset</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dataMapping</span><span class="op">$</span><span class="va">xySeries</span><span class="op">)</span>

<span class="va">configuration</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataMappingConfiguration.html">DataMappingConfiguration</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">configuration</span><span class="op">$</span><span class="fu">setXFactors</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">labels</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">labels</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, xFactors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>
<span class="va">configuration</span><span class="op">$</span><span class="fu">setYFactors</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">labels</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">labels</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, yFactors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="va">configuration</span><span class="op">$</span><span class="fu">setXOffsets</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">labels</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">labels</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, xOffsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="va">configuration</span><span class="op">$</span><span class="fu">setYOffsets</span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">labels</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">labels</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, yOffsets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>

<span class="va">dataMapping</span><span class="op">$</span><span class="fu">setConfiguration</span><span class="op">(</span>dataMappingConfiguration <span class="op">=</span> <span class="va">configuration</span><span class="op">)</span>
<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/setConfiguration-1.png" width="768">
Change axes scale to log</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMapping</span><span class="op">$</span><span class="va">log</span> <span class="op">&lt;-</span> <span class="st">"y"</span>
<span class="va">dataMapping</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/setYAxisToLog-1.png" width="768"></p>
<p>If results of a population simulation are available, these can be
plotted as mean +- percentile intervals.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dataMappingPop</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/DataMapping.html">DataMapping</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>

<span class="va">dataMappingPop</span><span class="op">$</span><span class="fu">addXYData</span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="va">observedData</span><span class="op">$</span><span class="va">Stevens_2012_placebo</span><span class="op">$</span><span class="va">Placebo_distal</span>,
    <span class="va">observedData</span><span class="op">$</span><span class="va">Stevens_2012_placebo</span><span class="op">$</span><span class="va">Placebo_proximal</span>,
    <span class="va">observedData</span><span class="op">$</span><span class="va">Stevens_2012_placebo</span><span class="op">$</span><span class="va">Placebo_total</span>
  <span class="op">)</span>,
  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Stevens 2012 solid distal"</span>,
    <span class="st">"Stevens 2012 solid proximal"</span>,
    <span class="st">"Stevens 2012 solid total"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu">loadSimulation</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">".."</span>, <span class="st">"tests"</span>, <span class="st">"data"</span>, <span class="st">"Stevens_2012_placebo_indiv_results.pkml"</span><span class="op">)</span><span class="op">)</span>
<span class="va">popResults</span> <span class="op">&lt;-</span> <span class="fu">importResultsFromCSV</span><span class="op">(</span>simulation <span class="op">=</span> <span class="va">sim</span>, filePaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">".."</span>, <span class="st">"tests"</span>, <span class="st">"data"</span>, <span class="st">"Stevens_2012_placebo_pop_results.csv"</span><span class="op">)</span><span class="op">)</span>

<span class="va">dataMappingPop</span><span class="op">$</span><span class="fu">addModelOutputs</span><span class="op">(</span>
  paths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention"</span>,
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention distal"</span>,
    <span class="st">"Organism|Lumen|Stomach|Metformin|Gastric retention proximal"</span>
  <span class="op">)</span>,
  simulationResults <span class="op">=</span> <span class="va">popResults</span>,
  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Stevens_2012_placebo solid total sim"</span>,
    <span class="st">"Stevens_2012_placebo solid distal sim"</span>,
    <span class="st">"Stevens_2012_placebo solid proximal sim"</span>
  <span class="op">)</span>,
  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    <span class="st">"Stevens 2012 solid total"</span>,
    <span class="st">"Stevens 2012 solid distal"</span>,
    <span class="st">"Stevens 2012 solid proximal"</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">dataMappingPop</span><span class="op">$</span><span class="va">plotType</span> <span class="op">&lt;-</span> <span class="va">PlotTypes</span><span class="op">$</span><span class="va">PopulationQuantiles</span>

<span class="va">dataMappingPop</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/loadAndPlotPopSim-1.png" width="768"></p>
<p>Multiple data mappings can be plotted in one figure using the
<code>plotMultiPanel</code> function. This function requires a
<code>PlotConfiguration</code> that allows more control over the
output.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">plotConfiguration</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/PlotConfiguration.html">PlotConfiguration</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">plotConfiguration</span><span class="op">$</span><span class="va">outputName</span> <span class="op">&lt;-</span> <span class="st">"Gastric emptying solid meal"</span>
<span class="va">plotConfiguration</span><span class="op">$</span><span class="va">addTitle</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></code></pre></div>
<p>Plot the four data mappings together</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plotMultiPanel.html">plotMultiPanel</a></span><span class="op">(</span>
  dataMappingList <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">dataMapping</span>, <span class="va">dataMappingPvO</span>, <span class="va">dataMappingBoxPlot</span>, <span class="va">dataMappingPop</span><span class="op">)</span>,
  plotConfiguration <span class="op">=</span> <span class="va">plotConfiguration</span>
<span class="op">)</span></code></pre></div>
<p><img src="figure-creation_files/figure-html/plotMultiPanel-1.png" width="1152"></p>
<pre><code><span class="co">#&gt; NULL</span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://esqlabs.com/" class="external-link"><img src="https://esqlabs.github.io/esqlabsRLegacy/reference/figures/esqlabs.png" height="24"></a>, Pavel Balazki, Johanna Eitel, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
